<!DOCTYPE HTML>
<!--
   Photon by HTML5 UP
   html5up.net | @ajlkn
   Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
   <head>
      <title>MArine_Object_Detection</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
      <link rel="stylesheet" href="assets/css/main.css" />
      <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

      <script>
         function reset(){
           document.getElementById("object1").innerHTML = "";
           document.getElementById("object2").innerHTML = "";
           document.getElementById("object3").innerHTML = "";
           document.getElementById("object4").innerHTML = "";
           document.getElementById("object5").innerHTML = "";
           document.getElementById("object6").innerHTML = "";
           document.body.style.backgroundColor = 'white';
         }
        </script>
  
        <style>
         
         .flex-container {
           display: flex;
           background-color: #ffffff;
         }
  
         .flex-container > div {
           background-color: #ffffff;
           margin: 10px;
           /*padding: 20px;*/
           font-size: 30px;
         }
         .h2 { text-align: center; }
         .h3 { text-align: center; }
         .h4 { text-align: center; }
        </style>
   </head>
   <body class="is-preload" onload="initTmap()">

      <!-- Header -->
         <section id="header">
            <div class="inner">
               <!--<span class="icon solid major fa-cloud"></span>-->
               <h1><strong>Marine Object Detection</strong><br />
               little freebie from <a href="http://html5up.net">HTML5 UP</a>.</h1>
               <p>Accumsan feugiat mi commodo erat lorem ipsum, sed magna<br />
               lobortis feugiat sapien sed etiam volutpat accumsan.</p>
               <ul class="actions special">
                  <li><a href="#one" class="button scrolly">해상객체 검출하기</a></li>
               </ul>
            </div>
         </section>

      <!-- One -->
         <section id="one" class="main style1">
            <div class="container">
               <div class="row gtr-150">
                  <!--<div class="col-6 col-12-medium">-->
                     <div style="text-align:center;">
                        <h2 class="h2" id="fire_detection" style="font-size: 120%; text-align:center;"><b>현재 이상 없습니다.</b></h2><br>
                        <a style="text-align:center;">검출된 객체 : </a>
                        <a id="object1" style="font-size: 120%; text-align:center;"></a>
                        <a id="object2" style="font-size: 120%; text-align:center;"></a>
                        <a id="object3" style="font-size: 120%; text-align:center;"></a>
                        <a id="object4" style="font-size: 120%; text-align:center;"></a>
                        <a id="object5" style="font-size: 120%; text-align:center;"></a>
                        <a id="object6" style="font-size: 120%; text-align:center;"></a>
                        <button class="button small" onclick="reset()" style="text-align:center;">RESET</button>
                     </div>
                        <!--<header class="major">
                           
                           <h2>Lorem ipsum dolor adipiscing<br />
                           amet dolor consequat</h2>
                        </header>-->
                        <p style="color:white ;">현재 저희는 선박, 등대, 해상풍력, 부표, 기타부유물, 사람, 화재씬, 유사씬 등 총 8개의 객체를 탐지합니다.ㅇㄴㅇㄹㄴㅇㄹㄴㅇㄹㄴㅇㄹㅇㄴㄹ</p>


                        <div id="main">
                           <div class="flex-container">
                             <div class="container">
                              <div class="canvas-wrapper">
                                
                                   <canvas id="output"></canvas>
                                   <div>
                                   <video id="video" playsinline style="
                                    -webkit-transform: scaleX(-1);
                                    transform: scaleX(-1);
                                    visibility: hidden;
                                    width: auto;
                                    height: auto;
                                    ">
                                   </video>
                                   </div>
                                   
                              </div>
                             </div>
                             
                             <div id="map_div"></div>
                           </div>
                        </div>
                        <div id="map" style="width:100%;height:350px;"></div>


                     
                  <!--</div>-->
                  <div class="col-6 col-12-medium imp-medium">
                     <!--<span class="image fit"><img src="images/pic01.jpg" alt="" /></span>-->
                  </div>
               </div>
            </div>
         </section>

      
      <!-- Five -->
      <!--
         <section id="five" class="main style1">
            <div class="container">
               <header class="major special">
                  <h2>Elements</h2>
               </header>

               <section>
                  <h4>Text</h4>
                  <p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is <em>emphasized</em>.
                  This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
                  This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>. Finally, <a href="#">this is a link</a>.</p>
                  <hr />
                  <header>
                     <h4>Heading with a Subtitle</h4>
                     <p>Lorem ipsum dolor sit amet nullam id egestas urna aliquam</p>
                  </header>
                  <p>Nunc lacinia ante nunc ac lobortis. Interdum adipiscing gravida odio porttitor sem non mi integer non faucibus ornare mi ut ante amet placerat aliquet. Volutpat eu sed ante lacinia sapien lorem accumsan varius montes viverra nibh in adipiscing blandit tempus accumsan.</p>
                  <header>
                     <h5>Heading with a Subtitle</h5>
                     <p>Lorem ipsum dolor sit amet nullam id egestas urna aliquam</p>
                  </header>
                  <p>Nunc lacinia ante nunc ac lobortis. Interdum adipiscing gravida odio porttitor sem non mi integer non faucibus ornare mi ut ante amet placerat aliquet. Volutpat eu sed ante lacinia sapien lorem accumsan varius montes viverra nibh in adipiscing blandit tempus accumsan.</p>
                  <hr />
                  <h2>Heading Level 2</h2>
                  <h3>Heading Level 3</h3>
                  <h4>Heading Level 4</h4>
                  <h5>Heading Level 5</h5>
                  <h6>Heading Level 6</h6>
                  <hr />
                  <h5>Blockquote</h5>
                  <blockquote>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan faucibus. Vestibulum ante ipsum primis in faucibus lorem ipsum dolor sit amet nullam adipiscing eu felis.</blockquote>
                  <h5>Preformatted</h5>
                  <pre><code>i = 0;

while (!deck.isInOrder()) {
print 'Iteration ' + i;
deck.shuffle();
i++;
}

print 'It took ' + i + ' iterations to sort the deck.';</code></pre>
               </section>

               <section>
                  <h4>Lists</h4>
                  <div class="row">
                     <div class="col-6 col-12-medium">
                        <h5>Unordered</h5>
                        <ul>
                           <li>Dolor pulvinar etiam.</li>
                           <li>Sagittis adipiscing.</li>
                           <li>Felis enim feugiat.</li>
                        </ul>
                        <h5>Alternate</h5>
                        <ul class="alt">
                           <li>Dolor pulvinar etiam.</li>
                           <li>Sagittis adipiscing.</li>
                           <li>Felis enim feugiat.</li>
                        </ul>
                     </div>
                     <div class="col-6 col-12-medium">
                        <h5>Ordered</h5>
                        <ol>
                           <li>Dolor pulvinar etiam.</li>
                           <li>Etiam vel felis viverra.</li>
                           <li>Felis enim feugiat.</li>
                           <li>Dolor pulvinar etiam.</li>
                           <li>Etiam vel felis lorem.</li>
                           <li>Felis enim et feugiat.</li>
                        </ol>
                        <h5>Icons</h5>
                        <ul class="icons">
                           <li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
                           <li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
                           <li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
                           <li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
                        </ul>
                     </div>
                  </div>
                  <h5>Actions</h5>
                  <div class="row">
                     <div class="col-6 col-12-medium">
                        <ul class="actions">
                           <li><a href="#" class="button primary">Default</a></li>
                           <li><a href="#" class="button">Default</a></li>
                        </ul>
                        <ul class="actions small">
                           <li><a href="#" class="button primary small">Small</a></li>
                           <li><a href="#" class="button small">Small</a></li>
                        </ul>
                        <ul class="actions stacked">
                           <li><a href="#" class="button primary">Default</a></li>
                           <li><a href="#" class="button">Default</a></li>
                        </ul>
                        <ul class="actions stacked">
                           <li><a href="#" class="button primary small">Small</a></li>
                           <li><a href="#" class="button small">Small</a></li>
                        </ul>
                     </div>
                     <div class="col-6 col-12-medium">
                        <ul class="actions stacked">
                           <li><a href="#" class="button primary fit">Default</a></li>
                           <li><a href="#" class="button fit">Default</a></li>
                        </ul>
                        <ul class="actions stacked">
                           <li><a href="#" class="button primary small fit">Small</a></li>
                           <li><a href="#" class="button small fit">Small</a></li>
                        </ul>
                     </div>
                  </div>
               </section>

               <section>
                  <h4>Table</h4>
                  <h5>Default</h5>
                  <div class="table-wrapper">
                     <table>
                        <thead>
                           <tr>
                              <th>Name</th>
                              <th>Description</th>
                              <th>Price</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td>Item One</td>
                              <td>Ante turpis integer aliquet porttitor.</td>
                              <td>29.99</td>
                           </tr>
                           <tr>
                              <td>Item Two</td>
                              <td>Vis ac commodo adipiscing arcu aliquet.</td>
                              <td>19.99</td>
                           </tr>
                           <tr>
                              <td>Item Three</td>
                              <td> Morbi faucibus arcu accumsan lorem.</td>
                              <td>29.99</td>
                           </tr>
                           <tr>
                              <td>Item Four</td>
                              <td>Vitae integer tempus condimentum.</td>
                              <td>19.99</td>
                           </tr>
                           <tr>
                              <td>Item Five</td>
                              <td>Ante turpis integer aliquet porttitor.</td>
                              <td>29.99</td>
                           </tr>
                        </tbody>
                        <tfoot>
                           <tr>
                              <td colspan="2"></td>
                              <td>100.00</td>
                           </tr>
                        </tfoot>
                     </table>
                  </div>

                  <h5>Alternate</h5>
                  <div class="table-wrapper">
                     <table class="alt">
                        <thead>
                           <tr>
                              <th>Name</th>
                              <th>Description</th>
                              <th>Price</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td>Item One</td>
                              <td>Ante turpis integer aliquet porttitor.</td>
                              <td>29.99</td>
                           </tr>
                           <tr>
                              <td>Item Two</td>
                              <td>Vis ac commodo adipiscing arcu aliquet.</td>
                              <td>19.99</td>
                           </tr>
                           <tr>
                              <td>Item Three</td>
                              <td> Morbi faucibus arcu accumsan lorem.</td>
                              <td>29.99</td>
                           </tr>
                           <tr>
                              <td>Item Four</td>
                              <td>Vitae integer tempus condimentum.</td>
                              <td>19.99</td>
                           </tr>
                           <tr>
                              <td>Item Five</td>
                              <td>Ante turpis integer aliquet porttitor.</td>
                              <td>29.99</td>
                           </tr>
                        </tbody>
                        <tfoot>
                           <tr>
                              <td colspan="2"></td>
                              <td>100.00</td>
                           </tr>
                        </tfoot>
                     </table>
                  </div>
               </section>

               <section>
                  <h4>Buttons</h4>
                  <ul class="actions">
                     <li><a href="#" class="button primary">Primary</a></li>
                     <li><a href="#" class="button">Default</a></li>
                  </ul>
                  <ul class="actions">
                     <li><a href="#" class="button large">Large</a></li>
                     <li><a href="#" class="button">Default</a></li>
                     <li><a href="#" class="button small">Small</a></li>
                  </ul>
                  <ul class="actions fit">
                     <li><a href="#" class="button fit">Fit</a></li>
                     <li><a href="#" class="button primary fit">Fit</a></li>
                     <li><a href="#" class="button fit">Fit</a></li>
                  </ul>
                  <ul class="actions fit small">
                     <li><a href="#" class="button primary fit small">Fit + Small</a></li>
                     <li><a href="#" class="button fit small">Fit + Small</a></li>
                     <li><a href="#" class="button primary fit small">Fit + Small</a></li>
                  </ul>
                  <ul class="actions">
                     <li><a href="#" class="button primary icon solid fa-download">Icon</a></li>
                     <li><a href="#" class="button icon solid fa-download">Icon</a></li>
                  </ul>
                  <ul class="actions">
                     <li><span class="button primary disabled">Disabled</span></li>
                     <li><span class="button disabled">Disabled</span></li>
                  </ul>
               </section>

               <section>
                  <h4>Form</h4>
                  <form method="post" action="#">
                     <div class="row gtr-uniform gtr-50">
                        <div class="col-6 col-12-xsmall">
                           <input type="text" name="demo-name" id="demo-name" value="" placeholder="Name" />
                        </div>
                        <div class="col-6 col-12-xsmall">
                           <input type="email" name="demo-email" id="demo-email" value="" placeholder="Email" />
                        </div>
                        <div class="col-12">
                           <select name="demo-category" id="demo-category">
                              <option value="">- Category -</option>
                              <option value="1">Manufacturing</option>
                              <option value="1">Shipping</option>
                              <option value="1">Administration</option>
                              <option value="1">Human Resources</option>
                           </select>
                        </div>
                        <div class="col-4 col-12-small">
                           <input type="radio" id="demo-priority-low" name="demo-priority" checked>
                           <label for="demo-priority-low">Low</label>
                        </div>
                        <div class="col-4 col-12-small">
                           <input type="radio" id="demo-priority-normal" name="demo-priority">
                           <label for="demo-priority-normal">Normal</label>
                        </div>
                        <div class="col-4 col-12-small">
                           <input type="radio" id="demo-priority-high" name="demo-priority">
                           <label for="demo-priority-high">High</label>
                        </div>
                        <div class="col-6 col-12-small">
                           <input type="checkbox" id="demo-copy" name="demo-copy">
                           <label for="demo-copy">Email me a copy</label>
                        </div>
                        <div class="col-6 col-12-small">
                           <input type="checkbox" id="demo-human" name="demo-human" checked>
                           <label for="demo-human">Not a robot</label>
                        </div>
                        <div class="col-12">
                           <textarea name="demo-message" id="demo-message" placeholder="Enter your message" rows="6"></textarea>
                        </div>
                        <div class="col-12">
                           <ul class="actions">
                              <li><input type="submit" value="Send Message" class="primary" /></li>
                              <li><input type="reset" value="Reset" /></li>
                           </ul>
                        </div>
                     </div>
                  </form>
               </section>

               <section>
                  <h4>Image</h4>
                  <h5>Fit</h5>
                  <div class="box alt">
                     <div class="row gtr-uniform gtr-50">
                        <div class="col-12"><span class="image fit"><img src="images/pic06.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic02.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic03.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic04.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic03.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic04.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic02.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic04.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic02.jpg" alt="" /></span></div>
                        <div class="col-4"><span class="image fit"><img src="images/pic03.jpg" alt="" /></span></div>
                     </div>
                  </div>
                  <h5>Left &amp; Right</h5>
                  <p><span class="image left"><img src="images/pic05.jpg" alt="" /></span>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.</p>
                  <p><span class="image right"><img src="images/pic05.jpg" alt="" /></span>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.</p>
               </section>

            </div>
         </section>
      -->

<!--필요한 스크립트 시작-->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>

<script>
       
   const coco_names = ['buoy', 'fire', 'lighthouse', 'offshore wind power','other floating object','person','ship', 'smoke']
   
   function isiOS() {
     return /iPhone|iPad|iPod/i.test(navigator.userAgent);
   }
   
   function isAndroid() {
     return /Android/i.test(navigator.userAgent);
   }
   
   function isMobile() {
     return isAndroid() || isiOS();
   }
   
   class Camera {
     constructor() {
      this.video = document.getElementById('video');
      this.canvas = document.getElementById('output');
      this.ctx = this.canvas.getContext('2d');
     }
   
     /**
      * Initiate a Camera instance and wait for the camera stream to be ready.
      */
     static async setupCamera() {
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        throw new Error(
         'Browser API navigator.mediaDevices.getUserMedia not available');
      }
   
      //const $size = { width: 640, height: 480 };
      const $size = { width: 840, height: 500 };
      const $m_size = { width: 360, height: 270 };
      const videoConfig = {
        'audio': false,
        'video': {
         facingMode: 'user',
         // Only setting the video to a specified size for large screen, on
         // mobile devices accept the default size.
         width: isMobile() ? $m_size.width : $size.width,
         height: isMobile() ? $m_size.height : $size.height,
        }
      };
   
      const stream = await navigator.mediaDevices.getUserMedia(videoConfig);
   
      const camera = new Camera();
      camera.video.srcObject = stream;
   
      await new Promise((resolve) => {
        camera.video.onloadedmetadata = () => {
         resolve(video);
        };
      });
   
      camera.video.play();
   
      const videoWidth = camera.video.videoWidth;
      const videoHeight = camera.video.videoHeight;
      // Must set below two lines, otherwise video element doesn't show.
      camera.video.width = videoWidth;
      camera.video.height = videoHeight;
   
      camera.canvas.width = videoWidth;
      camera.canvas.height = videoHeight;
      const canvasContainer = document.querySelector('.canvas-wrapper');
      canvasContainer.style = `width: ${videoWidth}px; height: ${videoHeight}px`;
   
      // Because the image from camera is mirrored, need to flip horizontally.
      //camera.ctx.translate(camera.video.videoWidth, 0);
      //camera.ctx.scale(-1, 1);
   
      return camera;
     }
   
     drawCtx() {
      this.ctx.drawImage(
        this.video, 0, 0, this.video.videoWidth, this.video.videoHeight);
     }
   
     clearCtx() {
      this.ctx.clearRect(0, 0, this.video.videoWidth, this.video.videoHeight);
     }
   
     
     drawResult(res) {
      const font = "16px sans-serif";
      this.ctx.font = font;
      this.ctx.textBaseline = "top";
   
      const [boxes, scores, classes, valid_detections] = res;
      const boxes_data = boxes.dataSync();
      const scores_data = scores.dataSync();
      const classes_data = classes.dataSync();
      const valid_detections_data = valid_detections.dataSync()[0];
   
      tf.dispose(res);
   
      var i;
      
      for (i = 0; i < valid_detections_data; ++i) {
        let [x1, y1, x2, y2] = boxes_data.slice(i * 4, (i + 1) * 4);
        x1 *= this.canvas.width;
        x2 *= this.canvas.width;
        y1 *= this.canvas.height;
        y2 *= this.canvas.height;
        const width = x2 - x1;
        const height = y2 - y1;
        const klass = coco_names[classes_data[i]];
        const score = scores_data[i].toFixed(2);
   
        // Draw the bounding box.
        this.ctx.strokeStyle = "#00FFFF";
        this.ctx.lineWidth = 4;
        this.ctx.strokeRect(x1, y1, width, height);
   
        // Draw the label background.
        this.ctx.fillStyle = "#00FFFF";
        const textWidth = this.ctx.measureText(klass + ":" + score).width;
        const textHeight = parseInt(font, 10); // base 10
        this.ctx.fillRect(x1, y1, textWidth + 4, textHeight + 4);
   
      }
      
      for (i = 0; i < valid_detections_data; ++i) {
        document.body.style.backgroundColor = 'white';
        let [x1, y1, ,] = boxes_data.slice(i * 4, (i + 1) * 4);
        x1 *= this.canvas.width;
        y1 *= this.canvas.height;
        const klass = coco_names[classes_data[i]];
        const score = scores_data[i].toFixed(2);
        var fire_count =1;
   
        // Draw the text last to ensure it's on top.
        this.ctx.fillStyle = "#000000";
        this.ctx.fillText(klass + ":" + score, x1, y1);
        
        if(klass == "fire"){
         
         document.body.style.backgroundColor = 'red';
         
         /*setTimeout(function() {
            document.body.style.backgroundColor = 'red';
         }, 10);
         document.body.style.backgroundColor = 'white';*/
         if(fire_count < 2){
            var audio = new Audio('C:/Users/lg/Downloads/fire.MP3');
            audio.play();
         }
         fire_count++;
         //console.log(fire_count);
         document.getElementById("fire_detection").innerHTML = "! 화재가 감지되었습니다 !";
         //document.getElementById("object1").innerHTML = "fire ";
         
         
        }
        else if(klass == "smoke"){
         document.body.style.backgroundColor = 'orange';
         //document.write(klass);
         /*setTimeout(function() {
            document.body.style.backgroundColor = 'orange';
         }, 10);
         document.body.style.backgroundColor = 'white';*/
         //document.getElementById("object2").innerHTML = "smoke ";
        }  
        else if(klass=="ship"){
         document.getElementById("object1").innerHTML = "ship ";
        }
        else if(klass=="offshore wind power"){
         document.getElementById("object2").innerHTML = "offshore wind power ";
        }
        else if(klass=="other floating object"){
         document.getElementById("object3").innerHTML = "other floating object ";
        }
        else if(klass=="lighthouse"){
         document.getElementById("object4").innerHTML = "lighthouse ";
        }
        else if(klass=="person"){
         document.getElementById("object5").innerHTML = "person ";
        }
        else if(klass=="buoy"){
         document.getElementById("object6").innerHTML = "buoy ";
        }
        else{
         document.body.style.backgroundColor = 'white';
         //document.write(klass);
        }
        
        
      }
   
     }
   
   }
   
   
   let detector, camera, stats;
   let startInferenceTime, numInferences = 0;
   let inferenceTimeSum = 0, lastPanelUpdate = 0;
   let rafId;
   
   const yolov5n_weight = "https://raw.githubusercontent.com/su00088/yolov5_detect_marine/main/model.json"
   
   async function createDetector() {
     return tf.loadGraphModel(yolov5n_weight);
   }
   
   
   
   async function renderResult() {
     if (camera.video.readyState < 2) {
      await new Promise((resolve) => {
        camera.video.onloadeddata = () => {
         resolve(video);
        };
      });
     }
   
     let detect_res = null;
     //const webcam = await tf.data.webcam(camera.video, { resizeWidth: 640, resizeHeight: 640 });
     //const img = await webcam.capture();
     let [modelWidth, modelHeight] = detector.inputs[0].shape.slice(1, 3);
     const input = tf.tidy(() => {
      return tf.image.resizeBilinear(tf.browser.fromPixels(camera.video), [modelWidth, modelHeight])
        .div(255.0).expandDims(0);
     });
     // Detector can be null if initialization failed (for example when loading
     // from a URL that does not exist).
     if (detector != null) {
   
      // Detectors can throw errors, for example when using custom URLs that
      // contain a model that doesn't provide the expected output.
      try {
        detect_res = await detector.executeAsync(
         input,
        );
      } catch (error) {
        detector.dispose();
        detector = null;
        alert(error);
      }
   
     }
     camera.drawCtx();
     camera.drawResult(detect_res);
     tf.dispose(input);
   
   }
   
   async function renderPrediction() {
     await renderResult();
   
     rafId = requestAnimationFrame(renderPrediction);
   };
   
   async function app() {
   
     camera = await Camera.setupCamera();
   
     detector = await createDetector();
   
     renderPrediction();
   };
   
   app();
   </script>


<script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xxe832bdc8412f45ec9b7a95171839052d"></script>

<script type="text/javascript">

   function initTmap(){
      window.navigator.geolocation.getCurrentPosition(current_position);   // 현재 위치 불러오기
   } 

   function current_position(position){
      var map = new Tmapv2.Map("map_div", {
         width : "35%",
         height : "470px",
         center:new Tmapv2.LatLng(position.coords.latitude, position.coords.longitude),   // 현재 위치를 중심으로
         zoom : 17
      });
   
      // 현재 위치 marker 표시
      var marker=new Tmapv2.Marker({
         position:new Tmapv2.LatLng(position.coords.latitude, position.coords.longitude),
         map:map
      });
   }
</script>

<!--필요한 스크립트 끝-->







      <!-- Footer -->
         <section id="footer">
            <ul class="icons">
               <li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
               <li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
               <li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
               <li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
               <li><a href="#" class="icon solid alt fa-envelope"><span class="label">Email</span></a></li>
            </ul>
            <ul class="copyright">
               <li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
            </ul>
         </section>

      <!-- Scripts -->
         <script src="assets/js/jquery.min.js"></script>
         <script src="assets/js/jquery.scrolly.min.js"></script>
         <script src="assets/js/browser.min.js"></script>
         <script src="assets/js/breakpoints.min.js"></script>
         <script src="assets/js/util.js"></script>
         <script src="assets/js/main.js"></script>

   </body>
</html>